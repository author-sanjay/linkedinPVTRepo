generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:@localhost:3306/testdb"
}

model User {
  id              Int     @id @default(autoincrement())
  name            String
  email           String  @unique
  password        String
  country         String?
  city            String?
  address         String?
  posts           Post[]
  jobDoing        Job?    @relation(fields: [jobDoingId], references: [id])
  jobDoingId      Int? // Foreign key to the Job model
  jobApplications Job[]   @relation("UserApplyingForJobs") // One-to-many relation (user applies to many jobs)
}

model Post {
  id      Int    @id @default(autoincrement())
  content String
  user    User   @relation(fields: [author], references: [id])
  author  Int
  job     Job?   @relation("PostJob") // One-to-one relation (one post has one job)
}

model Job {
  id            Int    @id @default(autoincrement())
  title         String
  description   String
  usersDoing    User[] @relation(fields: [], references: []) // Multiple users can do the same job
  usersApplying User[] @relation("UserApplyingForJobs") // Many users can apply for one job
  post          Post?  @relation("PostJob", fields: [postId], references: [id]) // One job corresponds to one post
  postId        Int?   @unique // Ensure uniqueness for one-to-one relation with Post
}
